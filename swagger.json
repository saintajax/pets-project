{
  "openapi": "3.0.1",
  "info": {
    "version": "1.0.0",
    "title": "Pet-ly API",
    "description": "API documentation for 'Pet-ly'."
  },
  "consumes": ["application/json", "multipart/form-data"],
  "produces": ["application/json", "multipart/form-data"],
  "servers": [
    {
      "url": "https://pet-ly.onrender.com/api"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Autorization and information about user"
    },
    {
      "name": "Friends",
      "description": "Access to receive friends"
    },
    {
      "name": "News",
      "description": "Access to receive news"
    },
    {
      "name": "Notices",
      "description": "Information about the notification"
    },
    {
      "name": "User",
      "description": "Information about the user"
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "summary": "Create a new user",
        "description": "Create a new user",
        "operationId": "createUser",
        "requestBody": {
          "description": "Create a new user",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["name", "email", "password", "city", "phone"],
                "properties": {
                  "name": {
                    "type": "String",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "String",
                    "format": "email",
                    "example": "example@email.com"
                  },
                  "password": {
                    "type": "String",
                    "format": "password",
                    "example": "password"
                  },
                  "cityRegion": {
                    "type": "String",
                    "example": "Kyiv, Kyivska"
                  },
                  "phone": {
                    "type": "String",
                    "example": "+380501111111"
                  },
                  "birthday": {
                    "type": "String",
                    "example": "00-00-0000"
                  },
                  "avatarURL": {
                    "type": "String",
                    "example": "//www.gravatar.com/avatar/ccb9f2c8d79a466e56a451782ca358d3"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Registration"
                }
              }
            }
          },
          "409": {
            "description": "Email in use"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "summary": "Login user",
        "description": "Login user",
        "requestBody": {
          "description": "Login user",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "String",
                    "example": "example@email.com"
                  },
                  "password": {
                    "type": "String",
                    "example": "password"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "User is logged in",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Login"
                }
              }
            }
          },
          "401": {
            "description": "Email or password invalid"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/auth/logout": {
      "get": {
        "tags": ["Auth"],
        "summary": "Logout user",
        "description": "Logout user by token in headers Autorization",
        "parameters": [
          {
            "in": "header",
            "name": "Authorization",
            "schema": {
              "type": "String"
            },
            "required": true,
            "description": "The token issued to the current user"
          }
        ],
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "Logged out"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/friends": {
      "get": {
        "tags": ["Friends"],
        "summary": "Get contact information about friends",
        "description": "Get contact information about friends",
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Friends"
                }
              }
            }
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/news": {
      "get": {
        "tags": ["News"],
        "summary": "Get news",
        "description": "Get news",
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/News"
                }
              }
            }
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/user/current": {
      "get": {
        "tags": ["User"],
        "summary": "Get current user",
        "description": "Get current user",
        "security": [{ "Bearer": [] }],
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "404": {
            "description": "Not found"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/user/update": {
      "patch": {
        "tags": ["User"],
        "summary": "Update user information",
        "description": "Update user information",
        "security": [{ "Bearer": [] }],
        "requestBody": {
          "description": "Update contact information about the user",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "String",
                    "example": "John Doe"
                  },
                  "email": {
                    "type": "String",
                    "format": "email",
                    "example": "example@email.com"
                  },
                  "cityRegion": {
                    "type": "String",
                    "example": "Kyiv, Kyivska"
                  },
                  "phone": {
                    "type": "String",
                    "example": "+380501111111"
                  },
                  "birthday": {
                    "type": "String",
                    "example": "00-00-0000"
                  },
                  "avatar": {
                    "type": "String",
                    "example": "//www.gravatar.com/avatar/6867d7469076bdce33bc75fee20918eb"
                  }
                }
              }
            }
          }
        },
        "required": true,
        "responses": {
          "200": {
            "description": "User's contact information succesfully updated",
            "content": {
              "multipart/form-data": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateUser"
                }
              }
            }
          },
          "400": {
            "description": "missing fields"
          },
          "404": {
            "description": "Not found"
          },
          "409": {
            "description": "Email in use"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Registration": {
        "type": "object",
        "required": ["name", "email", "password", "cityRegion", "phone"],
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "_id": {
                "type": "String",
                "example": "63a85bf53ab74349ac3a80eb"
              },
              "email": {
                "type": "String",
                "format": "email",
                "example": "example@email.com"
              },
              "name": {
                "type": "String",
                "example": "John Doe"
              },
              "cityRegion": {
                "type": "String",
                "example": "Kyiv, Kyivska"
              },
              "phone": {
                "type": "String",
                "example": "+380501111111"
              },
              "avatarURL": {
                "type": "String",
                "example": "//www.gravatar.com/avatar/6867d7469076bdce33bc75fee20918eb"
              }
            }
          },
          "token": {
            "type": "String",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYzYjVhODMyYjkzNmU0NGQ2Y2NkNWFhMSIsImlhdCI6MTY3Mjg0OTQ1OCwiZXhwIjoxNjcyODUwMzU4fQ.g68XnnvbrUq_2Z9u90Dn_iXkuHeZO4Rc5mB48JV1lMM"
          }
        }
      },
      "Login": {
        "type": "object",
        "properties": {
          "user": {
            "type": "object",
            "properties": {
              "_id": {
                "type": "String",
                "example": "63a85bf53ab74349ac3a80eb"
              },
              "email": {
                "type": "String",
                "format": "email",
                "example": "example@email.com"
              },
              "name": {
                "type": "String",
                "example": "John Doe"
              },
              "cityRegion": {
                "type": "String",
                "example": "Kyiv, Kyivska"
              },
              "phone": {
                "type": "String",
                "example": "+380501111111"
              },
              "avatarUrl": {
                "type": "String",
                "example": "//www.gravatar.com/avatar/6867d7469076bdce33bc75fee20918eb"
              },
              "myPets": { "type": "array" },

              "favorites": {
                "type": "array",
                "items": {
                  "example": "63b5b82ffe500173aca6defb"
                }
              }
            }
          }
        }
      },
      "Friends": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "_id": {
              "type": "String",
              "example": "63a633a6790ca3934876ab1d"
            },
            "title": {
              "type": "String",
              "example": "Притулок для бездомних тварин 'Сіріус"
            },
            "url": {
              "type": "String",
              "example": "https://dogcat.com.ua"
            },
            "addressUrl": {
              "type": "String",
              "example": "https://goo.gl/maps/iq8NXEUf31EAQCzc6"
            },
            "imageUrl": {
              "type": "String",
              "example": "https://storage.googleapis.com/kidslikev2_bucket/pets-support/images/sponsors/frame_287.png"
            },
            "address": {
              "type": "String",
              "example": "Fedorivka, Kyiv Oblast, Ukraine, 07372"
            },
            "workDays": {
              "type": "array",
              "example": [
                { "isOpen": false },
                { "isOpen": false },
                { "isOpen": false },
                { "isOpen": false },
                { "isOpen": false },
                { "isOpen": true, "from": "11:00", "to": "16:00" },
                { "isOpen": true, "from": "11:00", "to": "16:00" }
              ]
            },
            "phone": {
              "type": "String",
              "example": "+380931934069"
            },
            "email": {
              "type": "String",
              "example": null
            }
          }
        },
        "example": [
          {
            "_id": "63a633f7790ca3934876ab29",
            "title": "Притулок для бездомних тварин 'Сіріус",
            "url": "https://dogcat.com.ua",
            "addressUrl": "https://goo.gl/maps/iq8NXEUf31EAQCzc6",
            "imageUrl": "https://storage.googleapis.com/kidslikev2_bucket/pets-support/images/sponsors/frame_287.png",
            "address": "Fedorivka, Kyiv Oblast, Ukraine, 07372",
            "workDays": [
              { "isOpen": false },
              { "isOpen": false },
              { "isOpen": false },
              { "isOpen": false },
              { "isOpen": false },
              { "isOpen": true, "from": "11:00", "to": "16:00" },
              { "isOpen": true, "from": "11:00", "to": "16:00" }
            ],
            "phone": "+380931934069",
            "email": null
          },
          {
            "_id": "63a633f7790ca3934876ab30",
            "title": "Happy Paw",
            "url": "https://happypaw.ua/ua",
            "addressUrl": "https://goo.gl/maps/3RyzTYBvMr9WQWCC6",
            "imageUrl": "https://storage.googleapis.com/kidslikev2_bucket/pets-support/images/sponsors/frame_288.png",
            "address": "Київ, вулиця Шота Руставелі, 44 (3-й поверх, офіс 7)",
            "workDays": [
              { "isOpen": true, "from": "09:00", "to": "17:00" },
              { "isOpen": true, "from": "09:00", "to": "17:00" },
              { "isOpen": true, "from": "09:00", "to": "17:00" },
              { "isOpen": true, "from": "09:00", "to": "17:00" },
              { "isOpen": true, "from": "09:00", "to": "17:00" },
              { "isOpen": true, "from": "09:00", "to": "17:00" },
              { "isOpen": true, "from": "09:00", "to": "17:00" }
            ],
            "phone": "+380442900329",
            "email": "hello@happypaw.ua"
          }
        ]
      },
      "News": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "_id": {
              "type": "String",
              "example": "63a633f7790ca3934876ab28"
            },
            "title": {
              "type": "String",
              "example": "В День ветеринара в столиці пройде безкоштовний тренінг з надання першої допомоги тваринам"
            },
            "url": {
              "type": "String",
              "example": "https://www.kmlvm.com.ua/v-den-veterynara-v-stolytsi-projde-bezkoshtovnyj-trening-z-nadannya-pershoyi-dopomogy-tvarynam/"
            },
            "description": {
              "type": "String",
              "example": "В неділю, 14 серпня, в Тимчасовому притулку для тварин «ВДНГ» пройде тренінг на тему «Надання першої допомоги тваринам». Захід проводиться комунальним підприємством «Київська міська лікарня ветеринарної медицини», фахівці якого навчать всіх бажаючих навичкам надання першої допомоги братам нашим меншим, які потрапили в біду. Без перебільшення, подібні знання можуть врятувати життя чотирилапим. Тренінг безкоштовний, взяти в ньому участь може будь-хто, дозволяється участь зі своїм домашнім улюбленцем. Після тренінгу учасники зможуть отримати безкоштовну консультацію ветеринара, щодо догляду за тваринами, вакцинації та будь-яких інших питань, пов'язаними зі здоров'ям улюбленця. Дата проведення майстер-класу обрана не випадково. 14 серпня в Україні відзначається День працівників ветеринарної медицини і цього року ми вирішили провести такий потрібний тренінг. Для ветеринара головне – це врятовані брати наші менші, а навчити людей надавати первинну допомогу тваринам значить «інвестувати» у врятовані життя тварин в майбутньому. Початок тренінгу об 11:00. Адреса Тимчасового притулку для тварин «ВДНГ»: вулиця Академіка Глушкова, 1, 16 павільйон."
            },
            "date": {
              "type": "String",
              "example": "2022-08-12"
            }
          }
        },
        "example": [
          {
            "_id": "63a633f7790ca3934876ab29",
            "title": "В День ветеринара в столиці пройде безкоштовний тренінг з надання першої допомоги тваринам",
            "url": "https://www.kmlvm.com.ua/v-den-veterynara-v-stolytsi-projde-bezkoshtovnyj-trening-z-nadannya-pershoyi-dopomogy-tvarynam/",
            "description": "В неділю, 14 серпня, в Тимчасовому притулку для тварин «ВДНГ» пройде тренінг на тему «Надання першої допомоги тваринам». Захід проводиться комунальним підприємством «Київська міська лікарня ветеринарної медицини», фахівці якого навчать всіх бажаючих навичкам надання першої допомоги братам нашим меншим, які потрапили в біду. Без перебільшення, подібні знання можуть врятувати життя чотирилапим. Тренінг безкоштовний, взяти в ньому участь може будь-хто, дозволяється участь зі своїм домашнім улюбленцем. Після тренінгу учасники зможуть отримати безкоштовну консультацію ветеринара, щодо догляду за тваринами, вакцинації та будь-яких інших питань, пов'язаними зі здоров'ям улюбленця. Дата проведення майстер-класу обрана не випадково. 14 серпня в Україні відзначається День працівників ветеринарної медицини і цього року ми вирішили провести такий потрібний тренінг. Для ветеринара головне – це врятовані брати наші менші, а навчити людей надавати первинну допомогу тваринам значить «інвестувати» у врятовані життя тварин в майбутньому. Початок тренінгу об 11:00. Адреса Тимчасового притулку для тварин «ВДНГ»: вулиця Академіка Глушкова, 1, 16 павільйон.",
            "date": "2022-08-12"
          },
          {
            "_id": "63a633f7790ca3934876ab30",
            "title": "У Телеграмі запрацював чат-бот, що надає безкоштовні консультації щодо догляду за тваринами",
            "url": "https://www.kmlvm.com.ua/u-telegrami-zapratsyuvav-chat-bot-shho-nadaye-bezkoshtovni-konsultatsiyi-shhodo-doglyadu-za-tvarynamy/",
            "description": "У столиці запрацював спеціальний Telegram-бот «Твій вет Київ», який надає безкоштовні ветеринарні консультації щодо догляду та лікування тварин. Знайти бот можна за посиланням https://t.me/VetHelpKyiv_bot. Функціонал бота вже досить широкий, господарі тварин зможуть отримати відповіді на питання щодо вакцинації тварин, їх стерилізацію, дізнатись адреси муніципальних ветеринарних клінік, де можна отримати всі необхідні послуги. Крім того, користувачі боту зможуть отримати консультацію від ветеринарного лікаря, описавши проблему. Ця функція буде доступна з 9:00 до 18:00, однак цілодобово можна буде отримати основну довідкову інформацію з таких питань, як перша допомога при отруєнні тварини, укусу кліща, дізнатись графік профілактичних щеплень, тощо. Наразі бот працює в тестовому режимі, однак в майбутньому його функціонал буде розширюватись.",
            "date": "2022-07-19"
          }
        ]
      },
      "AddNoticies": {
        "type": "object",
        "properties": {
          "category": {
            "type": "String",
            "enum": ["sell", "lost-found", "in-good-hands", "favorite", "own"]
          },
          "title": {
            "type": "String",
            "example": "selling a pet"
          },
          "breed": {
            "type": "String",
            "example": "dog"
          },
          "name": {
            "type": "String",
            "example": "Tom"
          },
          "location": {
            "type": "String",
            "example": "Kyiv"
          },
          "sex": {
            "type": "String",
            "enum": ["male", "female"]
          },
          "price": {
            "type": "Number",
            "example": "100"
          },
          "owner": {
            "type": "object",
            "properties": {
              "_id": {
                "type": "String",
                "example": "63a85bf53ab74349ac3a80eb"
              },
              "email": {
                "type": "String",
                "format": "email",
                "example": "alex@gmail.com"
              }
            }
          },
          "avatarURL": {
            "type": "String",
            "example": "//www.gravatar.com/avatar/6867d7469076bdce33bc75fee20918eb"
          },
          "comments": {
            "type": "String",
            "example": "good pet"
          },
          "birthday": {
            "type": "String",
            "example": "19-07-2022"
          },
          "cloudId": {
            "type": "String",
            "example": "avatars/pqys0k4rpbrlkrliywpw"
          },
          "_id": {
            "type": "String",
            "example": "63b83cf10d1bdc5e427f2999"
          }
        },
        "example": {
          "category": "Sell",
          "title": "Selling a dog",
          "breed": "Dog",
          "name": "Tom",
          "location": "Kyiv",
          "sex": "male",
          "price": 100,
          "owner": {
            "_id": "63b8a123e29fb9ca523b1d6d",
            "email": "alex@gmail.com"
          },
          "avatarURL": "https://res.cloudinary.com/dhfk2xkow/image/upload/v1672264113/3700_6_10_ckne9o.jpg",
          "comments": "Good pet",
          "birthday": "00.00.0000",
          "cloudId": "avatars/pqys0k4rpbrlkrliywpw",
          "_id": "63b95c3ecb15809010a54f0d",
          "createdAt": "2023-01-07T11:49:18.273Z",
          "updatedAt": "2023-01-07T11:49:18.273Z"
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "code": {
            "type": "integer",
            "example": 200
          },
          "status": {
            "type": "String",
            "example": "success"
          },
          "data": {
            "type": "Array",
            "items": {
              "type": "object",
              "properties": {
                "_id": {
                  "type": "String",
                  "example": "63b89f63a2f28a3f4e4f6597"
                },
                "category": {
                  "type": "String",
                  "example": "sell"
                },
                "title": {
                  "type": "String",
                  "example": "Selling a dog"
                },
                "breed": {
                  "type": "String",
                  "example": "dog"
                },
                "name": {
                  "type": "String",
                  "example": "Tom"
                },
                "location": {
                  "type": "String",
                  "example": "Kyiv"
                },
                "sex": {
                  "type": "String",
                  "example": "male"
                },
                "price": {
                  "type": "Number",
                  "example": 100
                },
                "owner": {
                  "type": "object",
                  "properties": {
                    "_id": {
                      "type": "String",
                      "example": "63b8a123e29fb9ca523b1d6d"
                    },
                    "email": {
                      "type": "String",
                      "example": "alex@gmail.com"
                    }
                  }
                },
                "avatarURL": {
                  "type": "String",
                  "example": "https://res.cloudinary.com/dhfk2xkow/image/upload/v1672264113/3700_6_10_ckne9o.jpg"
                },
                "comments": {
                  "type": "String",
                  "example": "good pet"
                },
                "birthday": {
                  "type": "String",
                  "example": "00.00.0000"
                },
                "cloudId": {
                  "type": "String",
                  "example": "avatars/pqys0k4rpbrlkrliywpw"
                },
                "createdAt": {
                  "type": "String",
                  "example": "2023-01-07T11:49:18.273Z"
                },
                "updatedAt": {
                  "type": "String",
                  "example": "2023-01-07T11:49:18.273Z"
                }
              }
            }
          }
        },
        "example": {
          "code": 200,
          "status": "success",
          "data": [
            {
              "_id": "63b95c3ecb15809010a54f0d",
              "category": "sell",
              "title": "Selling a dog",
              "breed": "dog",
              "name": "Tom",
              "location": "Kyiv",
              "sex": "male",
              "price": 100,
              "owner": {
                "_id": "63b8a123e29fb9ca523b1d6d",
                "email": "alex@gmail.com"
              },
              "avatarURL": "https://res.cloudinary.com/dhfk2xkow/image/upload/v1672264113/3700_6_10_ckne9o.jpg",
              "comments": "good pet",
              "birthday": "00.00.0000",
              "cloudId": "avatars/pqys0k4rpbrlkrliywpw",
              "createdAt": "2023-01-07T11:49:18.273Z",
              "updatedAt": "2023-01-07T11:49:18.273Z"
            }
          ]
        }
      },

      "securitySchemes": {
        "Bearer": {
          "type": "http",
          "scheme": "bearer",
          "bearerFormat": "JWT"
        }
      }
    }
  }
}
